<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: Motor + GUI + PID</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Motor + GUI + PID </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md1"></a>
Descripción</h1>
<p>Proyecto hecho bajo el marco de la materia <em>Sistemas en Tiempo Real</em>, que consiste en el manejo a través de una interfaz gráfica de la velocidad de un motor. El proyecto consiste en tres módulos:</p>
<ol type="1">
<li>Interfaz: implementada en python3, pone a disposición del usuario la modificación de la velocidad deseada, y las variables P, I, D del módulo PID, que se encarga de calibrar el torque del motor.</li>
<li>Tiempo Real: que combina un módulo de PID para calibrar el torque del motor en función de la velocidad actual y la deseada, un módulo RTC para realizar controles cíclicos del motor, y un módulo de control del motor. Éste módulo de control del motor está implementado de dos formas:<ul>
<li>Un simulador del motor.</li>
<li>Un controlador del motor que se comunica por UDP con el motor real.</li>
</ul>
</li>
<li>El motor real, que se utiliza sólo si se usa el módulo de <em>tiempo real</em> correspondiente, y que se espera está expuesto a través de un servidor a Internet, esperando comandos por UDP.</li>
</ol>
<h1><a class="anchor" id="autotoc_md2"></a>
Protocolo de comunicación</h1>
<p>La interfaz envía por el socket TCP una cadena de caracteres con el formato: 'velocidad deseada,kp,ki,kd' Donde la velocidad deseada es un entero en el rango inclusivo [0,255], y kp, ki, kd son números de punto flotante.</p>
<p>El servidor envía a la interfaz como respuesta a dicha información la cadena de formato: 'velocidad real,torque real' Donde ambos son enteros en el rango inclusivo [0,255].</p>
<p>El servidor envía al motor la cadena con el formato: 'torque,<em>valor</em>'</p>
<p>Y recibe del motor la cadena: 'speed,<em>valor</em>'</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Grupo de trabajo</h1>
<ul>
<li>Integrantes: Brambilla Nicolás Gabriel, Perez Sardi Walter Gabriel, Pereyra Agustín Ezequiel.</li>
<li>Profesor: Coppens John.</li>
<li>Materia: Sistemas en Tiempo Real.</li>
<li>Año: 2020.</li>
<li>Universidad: UNDEF-CRUC-IUA.</li>
</ul>
<h1><a class="anchor" id="autotoc_md4"></a>
Requerimientos</h1>
<ul>
<li>Python3 o superior.</li>
<li>Librerías: Gtk, GooCanvas.</li>
<li>gcc</li>
<li>Makefile</li>
</ul>
<h1><a class="anchor" id="autotoc_md5"></a>
Para usar</h1>
<p>Primero correr el módulo de tiempo real (PID + RTC + Motor). Para ello, según el motor que se desée usar, se deberán correr los comandos:</p>
<ul>
<li>Motor UDP: <code>cd real_time/</code> <code>make demo_udp</code> <code>sudo ./demo_udp</code></li>
<li>Motor Simulado: <code>cd real_time/</code> <br  />
 <code>make demo_sim</code> <br  />
 <code>sudo ./demo_sim</code> <br  />
</li>
</ul>
<p>Luego, para utilizar la interfaz, abrir la terminal en la carpeta <em>str_2020</em> (<code>cd ../</code>), y correr el comando <code>python3 interfaz.py</code></p>
<h1><a class="anchor" id="autotoc_md6"></a>
Solución de problemas</h1>
<p>A continuación se presenta una pequeña guía de cómo analizar la fuente de algunos problemas que podrían ocurrir al intentar arrancar la aplicación o al realizar cambios en la misma.</p>
<h2><a class="anchor" id="autotoc_md7"></a>
Gráfico de la interfaz no funcionando</h2>
<p>Usar <code>netcat -l 8080</code>, abrir la interfaz y mover los deslizadores. Si en la terminal donde está netcat no aparece nada, la conexión al socket no se está realizando. Es probable que el problema se encuentre en las clases <em>Client.py</em> o <em>Connection.py</em>. Menos probable pero también posible es que la clase <em>Graphics.py</em> no esté consultando los datos como debería, en la función <em>animate(...)</em>.</p>
<h1><a class="anchor" id="autotoc_md8"></a>
TODO:</h1>
<ul>
<li>Refactorizar codigo (esquema get_speed-&gt;calcular tque nuevo-&gt;set_torque)</li>
<li>Pasar torque y speed de int a unsigned byte.</li>
<li>Documentar tests y debuggin.</li>
<li>Interfaz: adaptacion de espacio entre columnas automatico?</li>
<li>Pasar print a logging </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
